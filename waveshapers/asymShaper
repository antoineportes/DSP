################################################################
                   WAVESHAPER:  asymShaper
################################################################

//  Introduction

  So I was looking at the curve of exp (x), more specifically at the asymptote in 0 when x -> -inf.
  and I thought:
    "If that asymptote were in 1 and if -inf. were +inf. this would be a decent waveshaper."

  Then I realised that by considering the negative part of the not-yet-existing waveshaper I was pretty
  much already looking at it:
  -inf. can remain -inf. 0 must become -1 and 1 must become 0... Two problems, one fix.

    x  <=  0  ?  f(x)  =  exp (x) - 1

  Ok, now for the positive part -inf. should be +inf. so:  x -> -x
  This puts the asymptote in the right semiplane but the function is decaying while it should be growing.
  Easy fix:  exp (-x)  ->  -exp (-x)
  -exp (-0)  =  -1    ;    -exp (-inf.)  =  -0    ;    obviously I just need an offset of +1.

  Then:

    f (x)  =  x <= 0  ?  exp (x) - 1  :  1 - exp (-x);

  The curve lies right between tanH (x) and 2 * aTan (x) / pi so it sits in a comfortable place in the
  family of sigmoids.

  tanH has one multiplication:  2 * x ,  one exp:  exp (2 * x) ,  one addition:  exp (2 * x) + 1 ,
  one subtraction:  exp (2 * x) - 1 ,  and one division:  ( exp (2 * x) - 1 ) / ( exp (2 * x) + 1 )

  f (x) has one conditional branching, one exp, one subtraction (and potentially one sign inversion).

  Plus it's a very compliant candidate to the Antiderivative Anti-aliasing method:
  its antiderivatives are:  exp (x) + x  and  x - exp (-x) (same number of operations).

  I could stop here and I would have a very decent waveshaper. But I'll keep tweaking it a bit.


//  Soft knee

  This is close enough to tanH to be considered a "tube-like" wavehaper. But what if I want to emulate
  a transistor or a diode?

  These semiconductors are pretty much linear until some breaking point. Then you enter a soft knee.
  A very small one for diodes and a medium one for transistors (I'm simplifying things a lot here).

  All I have to do is apply y = x up until some point k where I can use f(x) only with an offset and
  a rescaling factor.

  The offset for y is obviously k. At x = y = k, I want the behaviour of f(0) so:
    f(x)  ->  f(x - k) + k          //  (I'm ignoring the negative part until further notice.)

  Ok but now the asymptote is no longer in 1. I want f(x) to fit between k and 1.
  So its size should be 1 - k instead of 1... My rescaling factor is 1 - k.

  But that's only a vertical stretch, I need to compensate for it by inversely rescaling the input.

    f(x)  ->  (1 - k) * f( (x - k) / (1 - k) ) + k

  Even though this works, one detail is not very practical: the size of the knee is 1 - k.
  If k is a parameter, then it should be the size of the knee. Then the offset becomes 1 - k and the
  rescaling factor becomes k.

    f(x)  ->  k * f( (x - 1 + k) / k) + 1 - k

  /*
    When k != 1 and x -> 0,  y = x  so no denormal noise.
  */
  
  I now have a waveshaper that morphs continuously between a hard-clipper (k = 0) and a sigmoid (k = 1).
  Let's tweak it further.


//  Ceiling
